# 面向对象object

## 类与对象OOP

> ## 对象编程（Object Oriented Programming，简称OOP）

对象【属性，行为】

类是一种数据类型，对象就是一个具体的实例

猫类	猫对象

创建一个对象，实例化一个对象，把类实例化

`Cat cat1=new Cat();`

> Java最大特点：面向对象

访问对象的属性：`cat1.name`

1. 类是抽象的，概念的，代表一类事物，是数据类型
2. 对象是具体的，实际的，代表一个具体事物
3. 类是对象的模板，对象是类的一个个体，对应一个实例

## 对象在内存中的存在形式

对象类似于数组，其本身存放在栈中，指向堆中的一块地址，在堆中存放了各种类的数据，若是基本数据类型，则直接存放对应数据，如果是引用类型（例如String）则在堆中存放一个地址，指向方法区中常量池的某一地址

![image-20240808172904951](C:\Users\F\AppData\Roaming\Typora\typora-user-images\image-20240808172904951.png)

![image-20240808173026377](C:\Users\F\AppData\Roaming\Typora\typora-user-images\image-20240808173026377.png)

## 属性(成员变量/field字段)

属性是类的组成部分，一般是基本数据类型，也可以是引用类型（字符串，数组）

1. 属性的定义语法和变量相同，`访问修饰符 属性类型 属性名`	
2. 属性的定义类型可以为任意类型
3. 属性如果不赋值，有默认值，规则同数组

访问修饰符：控制属性的访问范围

四种访问修饰符（控制方法使用的范围）：public	protected 默认(不写) private

> 貌似C++对象的存储好像和java不同，C++好像通过指针就可以操作

## 创建对象

1. 先声明再创建`Cat cat; cat=new Cat();`
2. 直接创建`Cat cat=new Cat();`

## 访问属性

`对象名.属性名`

## 对象的赋值

显然，由于对象是一个地址，所以赋值相当于指向同一个地址。类似于数组

![image-20240808174648590](C:\Users\F\AppData\Roaming\Typora\typora-user-images\image-20240808174648590.png)

## Java内存结构分析

1. 栈：一般存放基本数据类型（局部变量）
2. 堆：存放对象（Cat cat，数组等）
3. 方法区：常量池（常量，如字符串），类加载信息

## Java创建对象的流程分析

```java
Person p=new Person();
p.name="jack";
p.age=10;
```

1. 先加载Person类信息（属性和方法信息，==只会加载一次==）
2. 在堆中分配空间，默认初始化，把地址赋值给p，p就指向对象
3. 进行指定初始化

## 练习

![image-20240808175403419](C:\Users\F\AppData\Roaming\Typora\typora-user-images\image-20240808175403419.png)

##  成员方法method

```java
//1.public 	表示方法是公开
//2.void	表示方法没有返回值
//3.speak()	方法名和形参列表
//4.{}		方法体
public void speak(){
System.out.println("我是一个好人");
}
```

调用方法

```java
Person p=new Person();
p.speak();				//调用方法
```

基本示例

```java
public int getSum(int num1,int num2){
return num1+num2;
}
```

## 方法调用机制

方法调用：基本的代码是存放在main栈（JVM栈内存中一块特殊内存），通过方法调用，在栈内创建一个新的独立空间，用于存放形参，以及中间变量，最后返回后改空间销毁

![image-20240808214436108](C:\Users\F\AppData\Roaming\Typora\typora-user-images\image-20240808214436108.png)

重复的代码可以定义为一个方法，可以把方法写到一个类里面，然后调用该方法

提高代码的复用性；将细节封装，提供使用

## 方法的定义

```
访问修饰符 返回数据类型 方法名(形参列表){
	语句;
	return 返回值;
}
```

void作为类型值的时候没有返回值，可以没有return

 ##　方法使用细节

1. 一个方法最多一个返回值，但是多个结果，可以通过==数组==返回
2. 返回类型可以为任意类型，含基本类型或引用类型（数组，对象）
3. 如果方法要求有返回数据类型，则方法体最后要有`return`，而且要求返回值类型必须和`return`的值类型一致或兼容，**即return的要可以自动转换为方法的数据类型**。
4. 如果方法是`void`，则方法体中可以没有`return`语句，但是也可以写`return;`
5. 方法名遵循驼峰命名法getSum

## 参数列表细节

1. 一个方法有0个或多个参数，用逗号隔开
2. 参数类型可以为任意类型，例如`printArr(int[][] map)`
3. 调用带参数的方法时，一定对应着参数列表传入相同或兼容类型，即``传入的参数类型可以自动转换为参数定义时的类型``
4. 方法定义时参数为形式参数，形参。方法调用时的参数为实际参数，实参。实参和形参类型要一致或兼容，个数顺序一致

==方法不能嵌套定义==

## 方法调用细节

1. 同一个类中的方法调用：直接调用，**就是同一个类中某个方法内可以调用其他的方法，不用创建对象**
2. 跨类中的方法A类方法调用B类方法，需要通过对象名调用。**就是在方法里面先创建对象，再调用**
3. 跨类的方法调用和方法的访问修饰符相关

定义和访问空类型方法记得带上`()`